##### 4.3.4 小结

​	通过本节的分析相信我们应该足以驾驭Envoy中的`ThreadLocal`，从其设计可以看出有其巧妙之处，也有其不足的地方，比如其抽象出一个`Slot`和对应的线程存储进行了关联，`Slot`可以任意传递，因为不包含实际的数据，拷贝的开销很低，只包含了一个索引值，具体关联的线程存储数据是不知道的，避免直接暴露给用户背后的数据。而`InstanceImpl`对象则管理着所有`Slot`的分配和移除以及整个`ThreadLocal`对象的`shutdown`。还有引入的Bookkeeper机制也甚是巧妙，和4.2.3章节中的`DeferredDeletable`机制有着异曲同工之妙，通过这个机制可以做到安全的析构`SlotImpl`对象。
